<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Shop Catalogue</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{margin:0;padding-bottom:112px;font-family:'Segoe UI',sans-serif;background:#f8fafd;}
.header {background:linear-gradient(95deg,#d3f0ff 60%,#f3fcff 100%); padding:15px 0 12px 0;}
.catrow{
  display:flex;gap:14px;align-items:center;overflow-x:auto;justify-content:flex-start;max-width:99vw;
  margin:0 auto 10px auto;padding:13px 3vw 6px 3vw;scrollbar-width:thin; -webkit-overflow-scrolling:touch;
}
.cat-tile{
  min-width:130px;max-width:180px;background:#fff;color:#1976ad;font-size:1.08em;font-weight:900;
  border:none;border-radius:19px;padding:15px 14px 13px 14px;display:flex;align-items:center;justify-content:center;
  cursor:pointer;box-shadow:0 2px 11px #9accf609;transition:background .19s,color .16s,box-shadow .19s,transform .14s;
  margin:0 0 0 0;white-space:nowrap;
}
.cat-tile.active,.cat-tile:active{background:linear-gradient(92deg,#178cf8 56%,#19d2b6 100%)!important;color:#fff!important;box-shadow:0 6px 18px #2dd4ea33;transform:scale(1.09);}
.subbar{display:flex;gap:10px;justify-content:center;align-items:center;margin:13px 0 3px 1vw;overflow-x:auto;}
.sub-btn{background:#eaf3ff;color:#1366be;font-size:1em;padding:10px 31px;border-radius:14px;border:none;font-weight:800;cursor:pointer;white-space:nowrap;transition:background .16s,color .14s,box-shadow .13s,transform .13s;}
.sub-btn.active,.sub-btn:active{background:linear-gradient(97deg,#127bea 72%,#13dbc9 100%);color:#fff;box-shadow:0 4px 15px #8bfbe776;transform:scale(1.06);}
.imggrid-label{font-size:1.09em;font-weight:700;color:#0c87c9;margin:13px 0 6px 17px;}
.grid-wrap{max-width:570px;margin:0 auto;}
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:17px 17px;}
.card{background:#fff;border-radius:15px;box-shadow:0 2.7px 22px #aae9fb13;padding:14px 5px 16px 5px;display:flex;flex-direction:column;align-items:center;position:relative;animation:flipIn .16s;}
.card.best-collection{background:linear-gradient(134deg,#fff8da 23%,#fde48b 53%,#ffe7c6 90%);
  background-size:200% 200%;animation:bgGoldMove 3s linear infinite alternate;}
@keyframes flipIn{from{opacity:0;transform:translateY(17px) scale(.94);}to{opacity:1;transform:none;}}
@keyframes bgGoldMove{0%{background-position:0 0;}100%{background-position:100% 100%;}}
.c-img{width:91px;height:91px;object-fit:cover;border-radius:9px;background:#f7fbfd;box-shadow:0 1.0px 5px #d6fefd11;}
.c-title{font-size:.98em;font-weight:900;margin:7px 0 7px 0;text-align:center;color:#185493;line-height:1.16;word-break:break-word;min-height:2em;max-width:98%;overflow-wrap:anywhere;}
.card-action-row{display:flex;gap:9px;margin-top:6px;}
.like-btn{background:#f2fdff;color:#ea3d7a;font-size:1.07em;font-weight:800;border-radius:8px;padding:7px 13px;border:none;cursor:pointer;transition:.15s;}
.like-btn.liked,.like-btn:active{background:linear-gradient(92deg,#fedff9 70%,#fdebb7 97%);color:#a50640;}
.prev-btn{background:linear-gradient(90deg,#14dae1 70%,#18a5ff 100%);color:#fff;font-size:.98em;font-weight:900;border:none;padding:8px 22px;border-radius:7px;cursor:pointer;transition:.12s;}
.page-row{display:flex;gap:10px;align-items:center;justify-content:center;margin:14px 0 7px 0;}
.page-btn{background:linear-gradient(91deg,#13deea 74%,#1376cd 97%);border-radius:9px;border:none;color:#fff;font-size:1.13em;font-weight:900;padding:6px 20px;margin:0 3px;cursor:pointer;}
.page-btn[disabled]{opacity:.21;}
.p-label{font-weight:800;min-width:33px;text-align:center;color:#138db6;}
#modalBg{position:fixed;inset:0;z-index:2200;background:rgba(36,52,103,0.13);display:none;align-items:center;justify-content:center;}
#modalBg.active{display:flex;}
.modal-inner{background:#fff;border-radius:17px;box-shadow:0 27px 94px #16d2d155;padding:14px 4vw 16px 4vw;max-width:96vw;max-height:95vh;display:flex;flex-direction:column;align-items:center;gap:13px;}
.modal-img{max-width:74vw;max-height:50vh;border-radius:11px;box-shadow:0 5px 22px #a7dce90b;}
.modal-title{font-size:1.09em;font-weight:900;color:#1967be;text-align:center;}
.modal-like-btn{border:none;background:linear-gradient(92deg,#ebeafd 58%,#e3fafc 99%);color:#d80e4e;font-size:1.08em;font-weight:900;border-radius:8px;padding:8px 19px;margin-top:1px;cursor:pointer;transition:.12s;}
.modal-like-btn.liked{background:#e5ffea;color:#ef217a;}
.modal-close-btn{background:#f1f7fc;border:none;color:#db0c37;font-size:1.03em;padding:9px 20px;font-weight:900;border-radius:8px;margin-top:4px;cursor:pointer;}
.modal-back-btn{background:#f8feff;border:none;color:#1864bc;font-size:1.03em;padding:9px 23px;font-weight:900;border-radius:8px;cursor:pointer;margin-bottom:3px;}
.rev-row-num{display:flex;gap:13px;align-items:center;justify-content:center;margin:13px 0 0 0;}
.num-btn{font-size:1.31em;font-weight:800;border-radius:7px;background:#f6fafd;border:none;padding:5px 13px;cursor:pointer;transition:.13s;color:#158eb7;}
.num-btn.selected,.num-btn:active{background:linear-gradient(95deg,#fcf7be 38%,#fad53b 81%);color:#b38c0f;}
.rev-label{font-size:1.06em;font-weight:800;color:#1f8a8a;margin-right:8px;}
#likedBar{position:fixed;left:0;bottom:0;width:100vw;padding:14px 0 16px 0;background:linear-gradient(91deg,#09fbe3 65%,#1caffb 100%);
  display:flex;align-items:center;justify-content:space-between;z-index:2210;box-shadow:0 -3px 12px #53e7fa25;}
.lb-btn{font-size:1.01em;font-weight:900;background:#fff;color:#12a8b7;
  padding:12px 0 12px 0;margin:0;width:50vw;border:none;cursor:pointer;outline:none;letter-spacing:.01em;border-radius:0;
  transition:.13s;border-top:2px solid #e8f8fa;}
.lb-btn:active{background:#e6f8fa;transform:scale(1.06);}
.lb-btn.send{color:#1f9f18;border-left:2px solid #e8e8f6;}
.lb-btn.list{color:#1292c0;}
#waListBg{display:none;position:fixed;inset:0;z-index:2999;backdrop-filter:blur(2px);background:rgba(39,54,98,0.13);align-items:center;justify-content:center;}
#walist-modal{background:#fff;border-radius:17px;box-shadow:0 7px 43px #13dbe8aa;padding:19px 5vw 24px 5vw;max-width:94vw;max-height:75vh;overflow:auto;display:flex;flex-direction:column;align-items:center;}
#waListTitle{font-weight:900;color:#2174bc;font-size:1.15em;margin-bottom:6px;}
#waLikedList{list-style:none;text-align:left;max-width:420px;padding:2px 2px 13px 0;}
#waLikedList li{margin:11px 0 11px 0;display:flex;align-items:center;gap:13px;}
.lbthumb{width:35px;height:35px;border-radius:8px;object-fit:cover;background:#f2f5f7;}
.lbtit{font-size:.97em;font-weight:700;color:#156687;}
.lbrv{margin-left:auto;}
.lb-rm{background:none;border:none;color:#e81345;font-size:1.13em;font-weight:900;cursor:pointer;}
#waSendBtn{background:linear-gradient(87deg,#11dfbd 78%,#168dff 98%);color:#fff;font-size:1.09em;font-weight:900;border:none;border-radius:9px;padding:11px 28px;margin:15px 0 0 0;box-shadow:0 2px 11px #41d5e845;cursor:pointer;}
#waCloseBtn{background:none;border:none;color:#dc105c;font-size:.98em;margin:10px 0 0 0;font-weight:700;cursor:pointer;}
</style>
</head>
<body>
<div class="header">
  <div style="font-size:1.13em;font-weight:900;color:#1880cb;text-align:center;margin-bottom:13px;">Shop Catalogue</div>
  <div class="catrow" id="mainSectionList"></div>
  <div class="subbar" id="subBar" style="display:none"></div>
</div>
<div class="grid-wrap">
  <div class="imggrid-label" id="imgGridLabel"></div>
  <div class="grid" id="gallery"></div>
  <div class="page-row" id="pageRow" style="display:none;">
    <button class="page-btn" onclick="pagePrev()" id="prevBtn">&larr;</button>
    <span class="p-label" id="pageLabel"></span>
    <button class="page-btn" onclick="pageNext()" id="nextBtn">&rarr;</button>
  </div>
</div>
<!-- Modal-full image-preview+number-review -->
<div id="modalBg">
  <div class="modal-inner" id="modalInner">
    <button class="modal-back-btn" onclick="closeModal()">← Back</button>
    <img src="" id="modalImg" class="modal-img" alt="">
    <div class="modal-title" id="modalModalTitle"></div>
    <button class="modal-like-btn" id="modalLikeBtn" onclick="modalToggleLike()">♡ Like</button>
    <div class="rev-row-num"><span class="rev-label">রেটিং দিন:</span>
      <button class="num-btn" data-v="1">1</button>
      <button class="num-btn" data-v="2">2</button>
      <button class="num-btn" data-v="3">3</button>
      <button class="num-btn" data-v="4">4</button>
      <button class="num-btn" data-v="5">5</button>
    </div>
    <button class="modal-close-btn" onclick="closeModal()">✕ Close</button>
  </div>
</div>
<!-- Liked bar sticky -->
<div id="likedBar">
  <button class="lb-btn list" onclick="showWaPreview()">পছন্দের লিস্ট দেখুন</button>
  <button class="lb-btn send" onclick="waSendList()">পছন্দের লিস্ট পাঠান</button>
</div>
<!-- Liked Preview/WhatsApp modal -->
<div id="waListBg">
  <div id="walist-modal">
    <div id="waListTitle"></div>
    <ul id="waLikedList"></ul>
    <button id="waSendBtn"></button>
    <button id="waCloseBtn"></button>
  </div>
</div>
<script>
const DATA=[
  {key:"mala",name:"মালা",subs:[{name:"Best Collection",key:"best"},{name:"All",key:"all"}]},
  {key:"chandmala",name:"চাঁদ মালা",subs:[{name:"Best Collection",key:"best"},{name:"All",key:"all"}]},
  {key:"prodip",name:"প্রদীপ",subs:[{name:"Best Collection",key:"best"},{name:"All",key:"all"}]},
  {key:"saj",name:"সাজ",subs:[{name:"Best Collection",key:"best"},{name:"All",key:"all"}]},
  {key:"kapor",name:"কাপড়",subs:[{name:"Best Collection",key:"best"},{name:"All",key:"all"}]},
  {key:"gopal",name:"গোপালের সাজ",subs:[{name:"বসন",key:"boson"},{name:"মুকুট",key:"mukut"}]},
  {key:"durga",name:"দুর্গাপূজা",subs:[{name:"সাজ",key:"saj"},{name:"কাপড়",key:"kapor"},{name:"অন্যান্য",key:"onno"}]},
  {key:"kali",name:"কালী পূজা",subs:[{name:"সাজ",key:"saj"},{name:"কাপড়",key:"kapor"},{name:"অন্যান্য",key:"onno"}]},
  {key:"saraswati",name:"সরস্বতী পূজা",subs:[{name:"সাজ",key:"saj"},{name:"কাপড়",key:"kapor"},{name:"প্রদীপ",key:"prodip"},{name:"All",key:"all"}]},
  {key:"laxmi",name:"লক্ষী পূজা",subs:[{name:"সাজ",key:"saj"},{name:"কাপড়",key:"kapor"},{name:"প্রদীপ",key:"prodip"},{name:"All",key:"all"}]},
  {key:"onno",name:"অন্যান্য",subs:[{name:"All",key:"all"}]}
];
const IMAGE_ROOT = "images/";
let perPage = 6, currMainIdx=0, currSubIdx=0, page=0, liked=[], reviews={}, modalImgs=[], currModalKey="";
function imgName(secObj,subObj,num){
  if(secObj.name==="গোপালের সাজ") return `${secObj.name} ${subObj.name} ${num}`;
  if(["দুর্গাপূজা","কালী পূজা","সরস্বতী পূজা","লক্ষী পূজা"].includes(secObj.name)) return `${secObj.name} ${subObj.name} ${num}`;
  return `${secObj.name} ${subObj.name} ${num}`;
}
function renderMainSections(){
  let mainlist=document.getElementById('mainSectionList');mainlist.innerHTML='';
  DATA.forEach((sec,idx)=>{
    let btn=document.createElement('button');
    btn.className='cat-tile'+(currMainIdx===idx?' active':'');
    btn.textContent=sec.name;
    btn.onclick=()=>{currMainIdx=idx;currSubIdx=0;page=0;renderSubbar();renderActiveTile(idx);};
    mainlist.appendChild(btn);
  });
  renderActiveTile(currMainIdx); renderSubbar();
}
function renderActiveTile(idx){
  let tiles=document.querySelectorAll('.cat-tile');
  tiles.forEach((t,i)=>{t.classList.toggle('active',i===idx);});
  if(tiles[idx]){tiles[idx].scrollIntoView({behavior:"smooth",inline:"center"});}
}
function renderSubbar(){
  let sec=DATA[currMainIdx],sb=document.getElementById('subBar');sb.innerHTML='';
  if(sec.subs.length>1 || sec.subs[0].name!=='All'){
    sb.style.display='flex';
    sec.subs.forEach((s,i)=>{
      let btn=document.createElement('button');
      btn.className='sub-btn'+(i===currSubIdx?' active':'');
      btn.textContent=s.name;
      btn.onclick=()=>{currSubIdx=i;page=0;renderGallery();renderSubbar();};
      sb.appendChild(btn);
    });
  }
  else sb.style.display='none';
  renderGallery();
}
function renderGallery(){
  let g=document.getElementById('gallery');
  let sec=DATA[currMainIdx],sub=sec.subs[currSubIdx];
  let isBest = sub.key === "best";
  let images=[];
  for(let i=1;i<=10;i++){
    images.push({
      src:`${IMAGE_ROOT}${sec.key}_${sub.key}_${i}.jpg`,
      title:imgName(sec,sub,i),
      cardClass: isBest ? "card best-collection" : "card"
    });
  }
  modalImgs=images;
  let totalPages=Math.ceil(images.length/perPage);
  let start=page*perPage, arr=images.slice(start,start+perPage);
  g.innerHTML='';
  document.getElementById('imgGridLabel').textContent='“পছন্দে ট্যাপ করুন, তালিকা তৈরি হবে”';
  arr.forEach((imgO,idx)=>{
    let absIdx=start+idx;
    let lk=likeKey(sec.key,sub.key,absIdx);
    g.innerHTML+=`
      <div class="${imgO.cardClass}">
        <img src="${imgO.src}" class="c-img">
        <div class="c-title">${imgO.title}</div>
        <div class="card-action-row">
          <button class="like-btn${liked.includes(lk)?' liked':''}" onclick="toggleLike(event,'${sec.key}','${sub.key}',${absIdx})">${liked.includes(lk)?'❤️':''}পছন্দ</button>
          <button class="prev-btn" onclick="showModal('${sec.key}','${sub.key}',${absIdx})">Preview</button>
        </div>
      </div>
    `;
  });
  let pr=document.getElementById('pageRow');
  pr.style.display = totalPages>1 ? 'flex':'none';
  document.getElementById('pageLabel').textContent=`${page+1}/${totalPages}`;
  document.getElementById('prevBtn').disabled=page===0;
  document.getElementById('nextBtn').disabled=(page+1)>=totalPages;
}
function likeKey(sec,sub,idx){return `${sec}_${sub}_${idx}`;}
function pagePrev(){if(page>0){page--;renderGallery();}}
function pageNext(){
  let sec=DATA[currMainIdx],sub=sec.subs[currSubIdx],totalImages=10;
  let totalPages=Math.ceil(totalImages/perPage);
  if(page+1<totalPages){page++;renderGallery();}
}
function showModal(sec,sub,idx){
  let images = modalImgs; let imgObj=images[idx%images.length];
  let lk = likeKey(sec,sub,idx), lvd = liked.includes(lk); currModalKey = lk;
  document.getElementById('modalImg').src = imgObj.src;
  document.getElementById('modalModalTitle').textContent = imgObj.title;
  let lbtn = document.getElementById('modalLikeBtn');
  lbtn.className='modal-like-btn'+(lvd?' liked':'');
  lbtn.innerHTML=lvd?'❤️ পছন্দ':'♡ Like';
  lbtn.onclick=function(){toggleLike({stopPropagation:()=>{}},sec,sub,idx);showModal(sec,sub,idx);}
  // Number 1-5 rating
  let nums = document.querySelectorAll('.num-btn');
  let saved = Number(reviews[lk])||0;
  nums.forEach(nb=>{
    nb.classList.toggle('selected', Number(nb.dataset.v)===saved);
    nb.onclick=function(){reviews[lk]=Number(nb.dataset.v);nums.forEach(btn=>btn.classList.toggle('selected',btn===nb));};
  });
  document.getElementById('modalBg').style.display='flex';
}
function closeModal(){document.getElementById('modalBg').style.display='none';currModalKey="";}
function toggleLike(e,sec,sub,idx){
  e.stopPropagation();
  let k = likeKey(sec,sub,idx);
  let i = liked.indexOf(k);
  if(i===-1) liked.push(k); else liked.splice(i,1);
  renderGallery();
}
function waSendList(){
  if(!liked.length){alert('আপনি কিছুই পছন্দ করেননি!');return;}
  let arr=liked.map(k=>{
    let [sec,sub,idx]=k.split('_');
    let secO=DATA.find(s=>s.key===sec),subO=secO.subs.find(su=>su.key===sub),nm=imgName(secO,subO,parseInt(idx)+1);
    return nm;
  });
  let ratings=liked.map(k=>`(${reviews[k]??'N/A'})`).join(', ');
  let msg='আমি পছন্দ করেছি: '+arr.join(', ')+'\nরেটিং: '+ratings;
  let num='9547486999';
  let url='https://wa.me/91'+num+'?text='+encodeURIComponent(msg);
  window.open(url,'_blank');
}
function showWaPreview(){
  let arr=liked.map((k,li)=>{
    let [sec,sub,idx]=k.split('_');
    let secO=DATA.find(s=>s.key===sec),subO=secO.subs.find(su=>su.key===sub),nm=imgName(secO,subO,parseInt(idx)+1);
    let path=`${IMAGE_ROOT}${sec}_${sub}_${parseInt(idx)+1}.jpg`, star=reviews[k]||'';
    return {k:k,path:path,title:nm,star};
  });
  let modal=document.getElementById('waListBg'),list=document.getElementById('waLikedList');
  document.getElementById('waListTitle').textContent='পছন্দের তালিকা';
  if(!arr.length) list.innerHTML='<li style="color:#dc2e57;font-weight:600;">কিছুই পছন্দ করেননি!</li>';
  else list.innerHTML=arr.map(x=>`<li><img class="lbthumb" src="${x.path}"><span class="lbtit">${x.title}</span><span class="lbrv">${x.star?('রেটিং: '+x.star):""}</span><button class="lb-rm" onclick="lbDel('${x.k}')">✕</button></li>`).join('');
  document.getElementById('waSendBtn').textContent='WhatsApp এ পাঠান';
  document.getElementById('waCloseBtn').textContent='বন্ধ করুন';
  document.getElementById('waSendBtn').onclick=waSendList;
  document.getElementById('waCloseBtn').onclick=()=>{modal.style.display='none';};
  modal.style.display='flex';
}
function lbDel(k){liked=liked.filter(x=>x!==k);showWaPreview();}
renderMainSections();
</script>
</body>
</html>
