<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Shop Catalogue</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{margin:0;padding-bottom:95px;font-family:'Noto Sans Bengali',sans-serif;background:linear-gradient(180deg,#fffefd 75%,#fffae6 110%);}
.header{background:linear-gradient(93deg,#ffe7f7,#fffde2);padding:15px 0 10px 0;box-shadow:0 2px 16px #ffd7f390;}
.header-title{font-size:1.21em;font-weight:900;color:#b6294f;text-align:center;letter-spacing:.019em;}
.scrolling-bar,.subbar{display:flex;gap:11px;overflow-x:auto;padding:10px 3vw;scroll-behavior:smooth;white-space:nowrap;}
.cat-tile{margin:0;text-transform:capitalize;font-variant:small-caps;font-size:1.07em;font-weight:900;
         background:linear-gradient(92deg,#fff2f8 22%,#ece6ff 89%);
         border-radius:13px;border:none;padding:9px 14px;box-shadow:0 2px 8px #eec7fc26;min-width:64px;
         color:#a148ac;cursor:pointer;position:relative;white-space:nowrap;}
.cat-tile.active{background:linear-gradient(92deg,#ffebfe 42%,#ffeabe 100%);color:#88143d;}
.sub-btn{background:linear-gradient(94deg,#e5ffed 10%,#f9ecff 89%);
         border-radius:12px;border:none;padding:7px 10px 7px 10px;margin-right:5px;color:#308c7a;cursor:pointer;}
.sub-btn.active{background:linear-gradient(95deg,#fff8ec 0%,#e9edff 100%);color:#e05871;}
.imggrid-label{font-size:1.04em;font-weight:700;color:#a13796;margin:13px 0 8px 17px;letter-spacing:.012em;}
.grid-wrap{max-width:470px;width:99vw;margin:0 auto;}
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:14px 13px;padding:0 3vw;}
@media (min-width:670px){.grid{grid-template-columns:repeat(3,1fr);}}
.card{background:linear-gradient(95deg,#fff8fd 53%,#eef7e9 100%);
      margin:0;padding:12px 5px 11px 5px;border-radius:14px;box-shadow:0 2.8px 12px #f7eaf870;
      display:flex;flex-direction:column;align-items:center;position:relative;border:1.2px solid #f8e9fd;min-height:120px;}
.c-img{width:68px;height:68px;object-fit:cover;border-radius:9px;background:#fbe0ea;cursor:pointer;}
.c-title{font-size:1.01em;font-weight:900;text-align:center;color:#b735a4;text-transform:capitalize;font-variant:small-caps;letter-spacing:.03em;word-break:break-word;margin:4px 0 2px;}
.c-filename{font-size:.95em;color:#888;margin-bottom:2px;word-break:break-all;}
.card-action-row{display:flex;gap:9px;margin-top:4px;justify-content:center;width:100%;}
.action-btn{min-width:42px;max-width:42px;height:42px;display:inline-flex;align-items:center;justify-content:center;
           font-size:1.53em;font-weight:900;border-radius:50%;border:none;outline:none;transition:.17s;cursor:pointer;
           box-sizing:border-box;background:linear-gradient(91deg,#fff0fc 36%,#eeede6 122%);}
.like-btn,.preview-btn{box-shadow:0 2px 10px #e7dae523;}
.like-btn{color:#e24374;border:2.2px solid #efc2ce;position:relative;}
.like-btn.selected-btn{color:#1cb14d;border:2.1px solid #86e6ae;animation:emojiPulse 1s infinite;}
@keyframes emojiPulse{0%{filter:brightness(1);}50%{filter:brightness(1.4) scale(1.13);}100%{filter:brightness(1);}}
.preview-btn{color:#5485d1;border:2.2px solid #cde3fa;animation:emojiPulse 1.35s infinite;}
.action-btn:active{filter:brightness(.91);}
.page-row{display:flex;gap:8px;align-items:center;justify-content:center;margin:13px 0 9px;}
.page-btn{background:linear-gradient(91deg,#fffbe1 19%,#ffdbe5 111%);
          color:#c41e5b;font-weight:900;border:none;border-radius:10px;box-shadow:0 0.7px 9px #ffb3e879;font-size:1.14em;padding:6px 14px;}
.p-label{font-weight:800;min-width:27px;font-size:1.09em;text-align:center;color:#b535a2;}
#wishlistBtn{position:fixed;left:0;right:0;bottom:0;width:100vw;z-index:9998;padding:0;margin:0;border-radius:0;
  font-size:1.10em;font-weight:900;background:linear-gradient(270deg,#ffe2e3 13%,#fdfefd 42%,#f2ebe9 91%,#ffdbe8 100%);
  background-size:1100% 100%;color:#d04c7e;border:none;box-shadow:0 -1px 17px #fde8ec58;min-height:49px;display:flex;
  align-items:center;justify-content:center;gap:13px;animation:wishlistrun 5s linear infinite;letter-spacing:.025em;text-shadow:0 1.7px 6px #fff4d670;}
@keyframes wishlistrun{0%{background-position:0% 51%;}50%{background-position:100% 50%;}100%{background-position:0% 51%;}
}
#wishlistBtn:active{background:linear-gradient(92deg,#fff6ec,#ffe3e8);}
#modalLarge{z-index:9999;position:fixed;inset:0;background:rgba(185,128,176,0.14);display:flex;align-items:center;justify-content:center;animation:modalfadein .19s;}
@keyframes modalfadein{from{opacity:0;transform:scale(.96);}to{opacity:1;transform:scale(1);}}
.modal-inner{background:rgba(255,255,255,.96);border-radius:18px;box-shadow:0 8px 38px #fac1e168;padding:18px 5vw 18px 5vw;max-width:330px;width:95vw;max-height:93vh;display:flex;flex-direction:column;align-items:center;gap:13px;position:relative;}
.modal-img{max-width:83vw;max-height:38vh;border-radius:11px;box-shadow:0 5px 18px #e488ed2e;}
.modal-title{font-size:1.09em;font-weight:900;color:#ae41a2;text-align:center;margin:4px 0 3px;text-transform:capitalize;}
.modal-filename{font-size:.98em;color:#888;margin-bottom:0;margin-top:3px;word-break:break-all;}
.modal-inner .modal-action-row{display:flex;gap:16px;margin-top:5px;}
.qty-row{margin:7px 0 11px 0;display:flex;gap:9px;align-items:center;justify-content:center;}
.qty-btn{background:#f9fdfa;border:none;color:#a857c2;font-weight:900;padding:7px 15px;border-radius:8px;margin:0 2px;font-size:1em;cursor:pointer;}
.qty-btn.selected{background:#facfff;color:#7d2c89;}
.comm-btn{background:linear-gradient(91deg,#ffe8f2 50%,#f7ffe6 100%);margin-top:10px;font-weight:900;border:none;color:#dc2b70;padding:10px 0 10px 0;width:92%;max-width:184px;border-radius:10px;font-size:1.09em;cursor:pointer;}
#wishlistModal{position:fixed;inset:0;z-index:9001;background:rgba(223,203,239,0.11);display:flex;align-items:center;justify-content:center;
  animation:wishmodalin .14s;}
@keyframes wishmodalin{from{opacity:.14;transform:translateY(34px);}to{opacity:1;transform:translateY(0);}}
.wishlist-modal-inner{background:rgba(255,255,255,0.99);backdrop-filter:blur(13px);border-radius:19px;box-shadow:0 15px 44px #c98be891;
  padding:17px 3vw 19px 3vw;max-width:340px;width:94vw;max-height:83vh;overflow-y:auto;display:flex;flex-direction:column;align-items:center;}
.wishlist-title{font-size:1.10em;font-weight:900;color:#ca3491;letter-spacing:.029em;
  margin:2px 0 17px 0;text-shadow:0 2.5px 11px #fff5f899;}
.wishlist-list{list-style:none;padding:0;width:100%;margin:0 0 15px 0;}
.wishlist-list li{display:flex;align-items:center;gap:6px;margin-bottom:7px;font-size:1em;
  background:linear-gradient(93deg,#fffafc 73%,#f4fff7 100%);
  border-radius:8px;padding:6px 6px;box-shadow:0 1.2px 6px #e5d0ef24;}
.wl-thumb{width:24px;height:24px;border-radius:7px;object-fit:cover;background:#f5f4f6;}
.wl-name{flex:1;font-weight:700;text-transform:capitalize;color:#bd1886;font-size:.98em;}
.wl-qtybox{display:flex;align-items:center;gap:1.5px;background:#fbfbfc;border-radius:7px;padding:1.2px 5px;box-shadow:0 1px 5px #dcdcf021;margin-right:3px;}
.wish-minus,.wish-plus{border:none;border-radius:7px;font-weight:900;font-size:1.1em;padding:0px 7px;background:#f7d6eb;color:#b43674;cursor:pointer;}
.wish-minus[disabled],.wish-plus[disabled]{opacity:.45;cursor:not-allowed;}
.wl-rembtn{background:none;border:none;font-size:1em;color:#941f34;font-weight:900;cursor:pointer;margin:0 0 0 6px;}
.wishlist-close{background:none;border:none;color:#ad6b96;font-weight:800;font-size:1em;margin-top:9px;}
.wishlist-send{background:linear-gradient(93deg,#fec3f2 39%,#ffe8f2 100%);color:#c22f7e;font-size:1em;border:none;padding:9px 25px;
  border-radius:11px;font-weight:900;margin:10px 0 0 0;box-shadow:0 1.7px 8px #fce0f6b3;letter-spacing:.05em;}
#slideConfirm{position:fixed;bottom:81px;left:50%;transform:translateX(-50%);
  background:linear-gradient(92deg,#fff6fd 19%,#fcf7ef 99%);color:#e14599;font-weight:900;font-size:1.03em;border-radius:13px;box-shadow:0 6px 18px #eda9fe3b;
  padding:13px 25px;z-index:9999;animation:slidebounce .7s;}
@keyframes slidebounce{0%{opacity:0;transform:translate(-50%,36px) scale(.91);}
  37%{opacity:1;transform:translate(-50%,-12px) scale(1.06);}
  68%{transform:translate(-50%,0) scale(1);}
  100%{opacity:1;transform:translate(-50%,0) scale(1);}
}
</style>
</head>
<body>
<div class="header"><div class="header-title">Shop Catalogue</div></div>
<div class="scrolling-bar" id="mainSectionList"></div>
<div class="subbar scrolling-bar" id="subBar" style="display:none"></div>
<p class="imggrid-label">ছবি ট্যাপ করুন, প্রিভিউ দেখুন, কোয়ান্টিটি দিন।</p>
<div class="grid-wrap">
  <div class="grid" id="gallery"></div>
  <div class="page-row" id="pageRow" style="display:none;">
    <button class="page-btn" onclick="pagePrev()" id="prevBtn">←</button>
    <span class="p-label" id="pageLabel"></span>
    <button class="page-btn" onclick="pageNext()" id="nextBtn">→</button>
  </div>
</div>
<button id="wishlistBtn" onclick="showWishlist()">Wishlist (পছন্দের তালিকা)</button>
<script>
const DATA=[
  {key:"Durga", name:"Durga", subs:[{name:"Saj"},{name:"Kapor"},{name:"All"},{name:"Best"}]},
  {key:"Kali", name:"Kali", subs:[{name:"Saj"},{name:"Kapor"},{name:"All"},{name:"Best"}]},
  {key:"Gopal", name:"Gopal", subs:[{name:"Boson"},{name:"Mukut"}]},
  {key:"Kapor", name:"Kapor", subs:[{name:"Kapor"}]},
  {key:"Saraswati", name:"Saraswati", subs:[{name:"Kapor"},{name:"Prodip"},{name:"All"},{name:"Best"}]},
  {key:"Laxmi", name:"Laxmi", subs:[{name:"Kapor"},{name:"Prodip"},{name:"All"},{name:"Best"}]},
  {key:"Onno", name:"Onno", subs:[{name:"All"}]}
];
const IMAGE_ROOT = "images/";
let perPage=6, currMainIdx=0, currSubIdx=0, page=0;
let wishMap={}, qtySelected=1;

function getFilename(title){
  return title.replace(/[ ]/g,'').replace(/[^\w]/g,'').toLowerCase()+".jpg";
}
function renderMainSections(){
  let mainlist=document.getElementById('mainSectionList');mainlist.innerHTML='';
  DATA.forEach((sec,idx)=>{
    let c='cat-tile'+(currMainIdx===idx?' active':'');
    btn=document.createElement('button');
    btn.className=c; btn.textContent=sec.name; btn.title=sec.name;
    btn.onclick=()=>{currMainIdx=idx;currSubIdx=0;page=0;renderSubbar();renderActiveTile(idx);}
    mainlist.appendChild(btn);
  });
  renderActiveTile(currMainIdx);renderSubbar();
}
function renderActiveTile(idx){
  let tiles=document.querySelectorAll('.cat-tile');
  tiles.forEach((t,i)=>{t.classList.toggle('active',i===idx);});
  if(tiles[idx]){tiles[idx].scrollIntoView({behavior:"smooth",inline:"center"});}
}
function renderSubbar(){
  let sec=DATA[currMainIdx],sb=document.getElementById('subBar');sb.innerHTML='';
  if(sec.subs.length>1||sec.subs[0].name!=="All"){
    sb.style.display='flex';
    sec.subs.forEach((s,i)=>{
      let btn=document.createElement('button');
      btn.className='sub-btn'+(i===currSubIdx?' active':'');btn.textContent=s.name;btn.title=s.name;
      btn.onclick=()=>{currSubIdx=i;page=0;renderGallery();renderSubbar();};
      sb.appendChild(btn);
    });
  } else sb.style.display='none';
  renderGallery();
}
function renderGallery(){
  let g=document.getElementById('gallery');
  let sec=DATA[currMainIdx],sub=sec.subs[currSubIdx];
  let isBest=sub.name.toLowerCase()==="best";
  let totalImages=isBest?20:10, images=[];
  for(let i=1;i<=totalImages;i++){
    let title=`${sec.name} ${sub.name} ${i}`;
    images.push({
      src:`${IMAGE_ROOT}${getFilename(title)}`,
      title:title,
      filename:getFilename(title),
      cardClass:isBest?"card best":"card"
    });
  }
  let totalPages=Math.ceil(totalImages/perPage);
  let start=page*perPage,arr=images.slice(start,start+perPage);
  g.innerHTML='';
  arr.forEach(imgO=>{
    let itemTitle=imgO.title;
    let qty=wishMap[itemTitle]||0;
    g.innerHTML+=`
      <div class="${imgO.cardClass}">
        <img src="${imgO.src}" class="c-img" onclick="previewModal('${imgO.src}','${imgO.title}','${imgO.filename}')">
        <div class="c-title">${imgO.title}</div>
        <div class="c-filename">${imgO.filename}</div>
        <div class="card-action-row">
          <button class="action-btn like-btn${qty>0?' selected-btn':''}" onclick="toggleLike('${imgO.title}',event)">
            <span class="selected-icon" style="animation:emojiPulse .95s infinite;">${qty>0?'✅':'❤️'}</span>
          </button>
          <button class="action-btn preview-btn" onclick="previewModal('${imgO.src}','${imgO.title}','${imgO.filename}')">
            <span style="animation:emojiPulse 1.1s infinite;">👁️</span>
          </button>
        </div>
      </div>
    `;
  });
  let pr=document.getElementById('pageRow');
  pr.style.display=totalPages>1?'flex':'none';
  document.getElementById('pageLabel').textContent=`${page+1}/${totalPages}`;
  document.getElementById('prevBtn').disabled=page===0;
  document.getElementById('nextBtn').disabled=(page+1)>=totalPages;
}
function toggleLike(title,e){
  if(e)e.stopPropagation();
  if(wishMap[title]){delete wishMap[title];slideConfirm('❌ তালিকা থেকে বাদ!');}
  else {wishMap[title]=1;slideConfirm('✅ ছবিটি পছন্দ তালিকায় যুক্ত হয়েছে!');}
  renderGallery();
}
function slideConfirm(msg){
  if(document.getElementById('slideConfirm'))document.getElementById('slideConfirm').remove();
  let d=document.createElement('div');d.id='slideConfirm';d.textContent=msg;
  document.body.appendChild(d);setTimeout(()=>{d.remove();},1350);
}
function previewModal(src,title,filename){
  if(document.getElementById('modalLarge')) document.body.removeChild(document.getElementById('modalLarge'));
  let qty=wishMap[title]||0;
  let m = document.createElement('div');
  m.id="modalLarge";
  m.innerHTML=`
    <div class="modal-inner">
      <button onclick="document.body.removeChild(document.getElementById('modalLarge'))"
        style="position:absolute;right:15px;top:11px;background:none;border:none;font-size:1.20em;color:#b63f85;font-weight:900;cursor:pointer;">×</button>
      <img src="${src}" class="modal-img">
      <div class="modal-title">${title}</div>
      <div class="modal-filename">${filename}</div>
      <div class="modal-action-row">
        <button id="modalLikeBtn" class="action-btn ${qty>0?'selected-btn':'like-btn'}" onclick="modalLike('${title}')">
          <span class="selected-icon" style="animation:emojiPulse .85s infinite;">${qty>0?'✅':'❤️'}</span>
        </button>
        <button class="action-btn preview-btn" tabindex="-1">
          <span style="animation:emojiPulse 1s infinite;">👁️</span>
        </button>
      </div>
      <div class="qty-row">
        ${[1,2,3,4,5].map(n=>`<button class="qty-btn${qty===n?' selected':''}" onclick="setQty('${title}',${n})">${n}</button>`).join('')}
      </div>
      <button onclick="removeFromWish('${title}')" class="comm-btn" style="background:#ffe3e3;color:#c72944;margin-bottom:-6px;">Remove from Wishlist</button>
    </div>
  `;
  document.body.appendChild(m);
}
function modalLike(title){
  let btn=document.getElementById('modalLikeBtn');
  if(wishMap[title]){delete wishMap[title];
    if(btn)btn.className="action-btn like-btn",btn.innerHTML='<span class="selected-icon" style="animation:emojiPulse .85s infinite;">❤️</span>';
    slideConfirm('❌ বাদ দেওয়া হল!');
  }else{wishMap[title]=1;
    if(btn)btn.className="action-btn selected-btn",btn.innerHTML='<span class="selected-icon" style="animation:emojiPulse .85s infinite;">✅</span>';
    slideConfirm('✅ পছন্দের তালিকায়!');
  }
  renderGallery();
  if(document.getElementById('modalLarge')){let img=document.querySelector("#modalLarge .modal-img"),titleEl=document.querySelector("#modalLarge .modal-title"),fn=document.querySelector("#modalLarge .modal-filename");if(img&&titleEl&&fn)previewModal(img.src,titleEl.textContent,fn.textContent);}
}
function setQty(title,qty){
  if(qty<1)qty=1;if(qty>5)qty=5;wishMap[title]=qty;
  renderGallery();
  if(document.getElementById('modalLarge')){let img=document.querySelector("#modalLarge .modal-img"),titleEl=document.querySelector("#modalLarge .modal-title"),fn=document.querySelector("#modalLarge .modal-filename");if(img&&titleEl&&fn)previewModal(img.src,titleEl.textContent,fn.textContent);}
}
function removeFromWish(title){
  delete wishMap[title];renderGallery();
  if(document.getElementById('modalLarge'))document.getElementById('modalLarge').remove();
  if(document.getElementById('wishlistModal'))showWishlist();
}
function showWishlist(){
  if(document.getElementById('wishlistModal'))document.getElementById('wishlistModal').remove();
  let m = document.createElement('div');
  m.id="wishlistModal";
  let keys=Object.keys(wishMap);
  let html='<div class="wishlist-modal-inner"><div class="wishlist-title">পছন্দের তালিকা</div><ul class="wishlist-list">';
  if(!keys.length){html+='<li style="color:#ce3b7a;font-weight:600;">কোনো ছবির পছন্দ তালিকা নেই!</li>';}
  else{
    keys.forEach(t=>{
      let qty=wishMap[t];
      let imgName = getFilename(t);
      html+=`<li>
        <img class="wl-thumb" src="images/${imgName}">
        <span class="wl-name">${t}</span>
        <span class="wl-qtybox">
          <button class="wish-minus" onclick="changeWishlistQty('${t}',-1)" ${qty<=1?'disabled':''}>-</button>
          <span>${qty}</span>
          <button class="wish-plus" onclick="changeWishlistQty('${t}',1)" ${qty>=5?'disabled':''}>+</button>
        </span>
        <button class="wl-rembtn" onclick="removeFromWish('${t}')">✖</button>
      </li>`;
    });
  }
  html+='</ul><button class="wishlist-send" onclick="sendWishlist()">WhatsApp-এ পাঠান</button><button class="wishlist-close" onclick="document.body.removeChild(document.getElementById(\'wishlistModal\'))">বন্ধ করুন</button></div>';
  m.innerHTML=html;document.body.appendChild(m);
}
function changeWishlistQty(title,delta){
  if(!wishMap[title])wishMap[title]=1;
  let newQty=wishMap[title]+delta;
  if(newQty<1)newQty=1;if(newQty>5)newQty=5;
  wishMap[title]=newQty;
  showWishlist();
  renderGallery();
}
function sendWishlist(){
  let keys=Object.keys(wishMap);
  if(!keys.length){alert("কোনো পছন্দ তালিকা নেই!");return;}
  let msg="পছন্দের তালিকাঃ\n";
  keys.forEach(t=>{msg+=`${t} (${getFilename(t)}) Qty: ${wishMap[t]}, `;});
  window.open("https://wa.me/919547486999?text="+encodeURIComponent(msg),"blank");
}
function pagePrev(){if(page>0){page--;renderGallery();}}
function pageNext(){
  let sec=DATA[currMainIdx],sub=sec.subs[currSubIdx],totalImages=(sub.name.toLowerCase()=="best"?20:10);
  let totalPages=Math.ceil(totalImages/perPage);
  if(page+1<totalPages){page++;renderGallery();}
}
renderMainSections();
</script>
</body>
</html>
