<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Shop Catalogue</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body, html{background:#f6fafe;margin:0;padding:0;min-height:100vh;padding-bottom:85px;}
.top-row{display:flex;justify-content:space-between;align-items:center;max-width:430px;margin:25px auto 0 auto;}
.title{font-size:1.23em;font-weight:800;color:#2259c8;}
.lang-toggle{padding:4px 19px 4px 17px;border-radius:13px;border:none;background:#e8f0ff;color:#16479b;font-size:1em;font-weight:700;cursor:pointer;}
.fest-row{display:flex;gap:11px;flex-wrap:wrap;justify-content:center;max-width:430px;margin:16px auto;}
.fest-btn{padding:9px 18px;background:#e9edfa;color:#215ad2;border:none;border-radius:12px;font-weight:700;cursor:pointer;font-size:1em;transition:.11s;}
.fest-btn.active{background:#225bef;color:#fff;box-shadow:0 2px 12px #b6c4f949;}
.sec-row{display:flex;gap:7px;margin:0 0 7px 0;justify-content:center;}
.sec-btn{padding:7px 15px;background:#f4f6fb;color:#274faa;border:none;border-radius:10px;font-weight:700;cursor:pointer;font-size:.97em;}
.sec-btn.active{background:#67a7f8ca;color:#fff;box-shadow:0 2px 9px #bed3f78a;}
/*--- Perfectly centered grid within a card-like background ---*/
.gallery-outer{max-width:460px;margin:0 auto 18px auto;background:#fafdff;border-radius:16px;box-shadow:0 2px 15px #c7eafa1c;min-height:373px;padding:17px 8px;display:flex;flex-direction:column;align-items:center;}
.gallery-ctrl{display:flex;justify-content:space-between;align-items:center;width:100%;margin-bottom:6px;}
.arrow-btn{background:rgba(121,191,255,0.11);color:#1d67b8;border:none;font-size:2.15em;border-radius:15px;padding:5px 14px;cursor:pointer;transition:.11s;font-weight:bolder;}
.arrow-btn:active{background:#dbe7fb;}
.arrow-btn[disabled]{opacity:.22;}
.gallery{display:grid;grid-template-columns:repeat(2,1fr);gap:15px;width:99%;max-width:390px;margin:0 auto;}
.card{background:#fff;border-radius:12px;box-shadow:0 2px 9px #ddeaff27;padding:7px 3px 12px 3px;display:flex;flex-direction:column;align-items:center;min-height:149px;animation:fadeUp .40s;}
@keyframes fadeUp{0%{opacity:0;transform:translateY(30px);}100%{opacity:1;transform:none;}}
.card img{width:99%;max-width:128px;height:92px;object-fit:cover;border-radius:10px;margin-top:4px;cursor:pointer;box-shadow:0 1.2px 5px #d5e8fd21;}
.card-title{font-size:1em;font-weight:700;text-align:center;margin:5px 0 4px 0;color:#1144b2;}
.like-btn{border:none;background:rgba(244,247,252,.81);font-size:1.13em;padding:8px 26px 7px 26px;border-radius:10px;margin-top:5px;color:#e84e7f;cursor:pointer;box-shadow:0 1.5px 6px #efd6e52a;font-weight:bold;transition:background .17s, color .14s;}
.like-btn.liked{background:rgba(255,203,236,.50);color:#b80a40;}
/* WhatsApp FULL-Width floating bar */
#waFloatBar{position:fixed;left:0;bottom:0;width:100vw;padding:11px 0 8px 0;background:rgba(40,231,152,0.96);display:flex;align-items:center;justify-content:center;z-index:1115;box-shadow:0 -5px 29px #75f3be25;backdrop-filter:blur(5px);}
#waFloatBar .waBarBtn{background:transparent;outline:none;border:none;color:#fff;font-size:1.19em;font-weight:900;letter-spacing:.02em;display:flex;align-items:center;gap:13px;cursor:pointer;}
.waBarIco{font-size:1.56em;}
/* Confirmation toast */
#toastMsg{position:fixed;left:50%;bottom:67px;transform:translateX(-50%);background:#fafdffe7;color:#186adb;padding:11px 26px;border-radius:13px;font-size:1.08em;font-weight:700;box-shadow:0 4px 22px #a0cdfc36;z-index:1117;display:none;}
/* --- Modal --- */
#modalBg{position:fixed;inset:0;z-index:1120;background:rgba(36,52,103,0.18);display:none;align-items:center;justify-content:center;}
#modalBg.active{display:flex;}
.modal-inner{background:rgba(254,255,255,.98);border-radius:17px;box-shadow:0 24px 79px #7db1e955;padding:17px 7vw 21px 7vw;max-width:99vw;
max-height:95vh;display:flex;flex-direction:column;align-items:center;gap:11px;animation:modalPop .6s cubic-bezier(.35,1.2,.49,1.03);}
@keyframes modalPop{0%{opacity:0;transform:scale(.82) translateY(55px);}53%{transform:scale(1.14) translateY(-11px);}100%{opacity:1;transform:none;}}
.modal-imgbox{display:flex;align-items:center;}
.modal-img{max-width:73vw;max-height:54vh;border-radius:19px;box-shadow:0 4px 27px #aac7f139;animation:imgIn .42s;}
@keyframes imgIn{from{opacity:0;transform:scale(1.13);}to{opacity:1;transform:scale(1);}}
.modal-arrow{background:#eef5ffbe;border:none;color:#2467c8;font-size:2.05em;font-weight:700;border-radius:12px;cursor:pointer;padding:5px 23px;margin:0 8px;transition:.12s;z-index:2;}
.modal-arrow[disabled]{opacity:.25;}
.modal-title{font-size:1.05em;font-weight:700;color:#2151c1;margin:7px 0 5px 0;text-align:center;}
.modal-like-btn{border:none;background:linear-gradient(90deg,#e6eefa 70%,#fff6fa 100%);color:#e64264;font-size:1.12em;font-weight:800;border-radius:13px;padding:10px 37px;margin:2px 0;box-shadow:0 2px 12px #edfaf63c;cursor:pointer;}
.modal-like-btn.liked{background:linear-gradient(71deg,#ffe3ef 65%,#e6eefc 100%);color:#ef267a;}
.modal-close-btn{background:#f3f5fe;border:none;color:#d91049;font-size:1.06em;padding:8px 19px;font-weight:800;border-radius:8px;margin:7px 0 0 0;cursor:pointer;}
/* Video Btn */
.video-btn-wrap{margin:9px auto 0 auto;display:flex;justify-content:center;}
.video-btn{background:rgba(17,107,212,.14);color:#1b51b7;border:none;border-radius:18px;padding:9px 26px 9px 23px;font-size:.99em;display:flex;align-items:center;gap:10px;font-weight:800;box-shadow:0 2.5px 10px #aecafd14;cursor:pointer;backdrop-filter:blur(1.5px);transition:.13s;}
.video-btn:active{background:rgba(84,145,255,.20);}
.video-ico{font-size:1.25em;}
@media (max-width:480px){
  .gallery-outer{padding:7px 1vw;min-height:265px;}
  .gallery{max-width:99vw;}
  .modal-img{max-width:98vw;}
  .modal-inner{padding:12px 0;}
}
</style>
</head>
<body>
<div class="top-row">
  <span class="title" id="pageTitle">Shop Catalogue</span>
  <button class="lang-toggle" onclick="toggleLang()" id="langBtn">EN</button>
</div>
<div class="fest-row" id="festRow"></div>
<div class="sec-row" id="secRow"></div>
<div class="gallery-outer">
  <div class="gallery-ctrl">
    <button class="arrow-btn" id="galleryPrev" onclick="pagePrev()">&larr;</button>
    <button class="arrow-btn" id="galleryNext" onclick="pageNext()">&rarr;</button>
  </div>
  <div class="gallery" id="gallery"></div>
</div>
<div id="waFloatBar">
  <button class="waBarBtn" onclick="shareWhatsApp()">
    <span class="waBarIco">üí¨</span>‡¶™‡¶õ‡¶®‡ßç‡¶¶‡ßá‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶™‡¶æ‡¶†‡¶æ‡¶®
  </button>
</div>
<div id="toastMsg"></div>
<!-- --- Modal --- -->
<div id="modalBg">
  <div class="modal-inner" id="modalInner">
    <div class="modal-imgbox">
      <button class="modal-arrow" id="modalPrevBtn" onclick="modalPrev()" title="‡¶Ü‡¶ó‡ßá‡¶∞" tabindex="-1">&#8592;</button>
      <img src="" id="modalImg" class="modal-img" alt="">
      <button class="modal-arrow" id="modalNextBtn" onclick="modalNext()" title="‡¶™‡¶∞‡ßá‡¶∞" tabindex="-1">&#8594;</button>
    </div>
    <div class="modal-title" id="modalModalTitle"></div>
    <button class="modal-like-btn" id="modalLikeBtn" onclick="modalToggleLike()">‚ô° Like</button>
    <div class="video-btn-wrap" id="modalVideoWrap"></div>
    <button class="modal-close-btn" onclick="closeModal()">‚úï ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>
  </div>
</div>
<script>
const FESTIVALS = [
  {
    id:"durga", bn:"‡¶¶‡ßÅ‡¶∞‡ßç‡¶ó‡¶æ‡¶™‡ßÇ‡¶ú‡¶æ", en:"Durga Puja", sections:[
      { key:"mala", bn:"‡¶Æ‡¶æ‡¶≤‡¶æ", en:"Garland", imgs:Array.from({length:20},(_,i)=>({src:`images/durga_mala${i+1}.jpg`,bn:`‡¶¶‡ßÅ‡¶∞‡ßç‡¶ó‡¶æ ‡¶Æ‡¶æ‡¶≤‡¶æ ${i+1}`,en:`Durga Garland ${i+1}`})) },
      { key:"saj", bn:"‡¶∏‡¶æ‡¶ú", en:"Decor", imgs:Array.from({length:20},(_,i)=>({src:`images/durga_saj${i+1}.jpg`,bn:`‡¶¶‡ßÅ‡¶∞‡ßç‡¶ó‡¶æ ‡¶∏‡¶æ‡¶ú ${i+1}`,en:`Durga Decor ${i+1}`})) },
      { key:"onno", bn:"‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø", en:"Others", imgs:Array.from({length:20},(_,i)=>({src:`images/durga_onno${i+1}.jpg`,bn:`‡¶¶‡ßÅ‡¶∞‡ßç‡¶ó‡¶æ ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ${i+1}`,en:`Durga Other ${i+1}`})) }
    ]
  },
  {
    id:"kali", bn:"‡¶ï‡¶æ‡¶≤‡¶ø‡¶™‡ßÇ‡¶ú‡¶æ", en:"Kali Puja", sections:[
      { key:"mala", bn:"‡¶Æ‡¶æ‡¶≤‡¶æ", en:"Garland", imgs:Array.from({length:20},(_,i)=>({src:`images/kali_mala${i+1}.jpg`,bn:`‡¶ï‡¶æ‡¶≤‡ßÄ ‡¶Æ‡¶æ‡¶≤‡¶æ ${i+1}`,en:`Kali Garland ${i+1}`})) },
      { key:"saj", bn:"‡¶∏‡¶æ‡¶ú", en:"Decor", imgs:Array.from({length:20},(_,i)=>({src:`images/kali_saj${i+1}.jpg`,bn:`‡¶ï‡¶æ‡¶≤‡ßÄ ‡¶∏‡¶æ‡¶ú ${i+1}`,en:`Kali Decor ${i+1}`})) },
      { key:"onno", bn:"‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø", en:"Others", imgs:Array.from({length:20},(_,i)=>({src:`images/kali_onno${i+1}.jpg`,bn:`‡¶ï‡¶æ‡¶≤‡ßÄ ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ${i+1}`,en:`Kali Other ${i+1}`})) }
    ]
  },
  {
    id:"saraswati", bn:"‡¶∏‡¶∞‡¶∏‡ßç‡¶¨‡¶§‡ßÄ ‡¶™‡ßÇ‡¶ú‡¶æ", en:"Saraswati Puja", sections:[
      { key:"mala", bn:"‡¶Æ‡¶æ‡¶≤‡¶æ", en:"Garland", imgs:Array.from({length:20},(_,i)=>({src:`images/saraswati_mala${i+1}.jpg`,bn:`‡¶∏‡¶∞‡¶∏‡ßç‡¶¨‡¶§‡ßÄ ‡¶Æ‡¶æ‡¶≤‡¶æ ${i+1}`,en:`Saraswati Garland ${i+1}`})) },
      { key:"saj", bn:"‡¶∏‡¶æ‡¶ú", en:"Decor", imgs:Array.from({length:20},(_,i)=>({src:`images/saraswati_saj${i+1}.jpg`,bn:`‡¶∏‡¶∞‡¶∏‡ßç‡¶¨‡¶§‡ßÄ ‡¶∏‡¶æ‡¶ú ${i+1}`,en:`Saraswati Decor ${i+1}`})) },
      { key:"onno", bn:"‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø", en:"Others", imgs:Array.from({length:20},(_,i)=>({src:`images/saraswati_onno${i+1}.jpg`,bn:`‡¶∏‡¶∞‡¶∏‡ßç‡¶¨‡¶§‡ßÄ ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ${i+1}`,en:`Saraswati Other ${i+1}`})) }
    ]
  },
  {
    id:"laxmi", bn:"‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ ‡¶™‡ßÇ‡¶ú‡¶æ", en:"Laxmi Puja", sections:[
      { key:"mala", bn:"‡¶Æ‡¶æ‡¶≤‡¶æ", en:"Garland", imgs:Array.from({length:20},(_,i)=>({src:`images/laxmi_mala${i+1}.jpg`,bn:`‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ ‡¶Æ‡¶æ‡¶≤‡¶æ ${i+1}`,en:`Laxmi Garland ${i+1}`})) },
      { key:"saj", bn:"‡¶∏‡¶æ‡¶ú", en:"Decor", imgs:Array.from({length:20},(_,i)=>({src:`images/laxmi_saj${i+1}.jpg`,bn:`‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ ‡¶∏‡¶æ‡¶ú ${i+1}`,en:`Laxmi Decor ${i+1}`})) },
      { key:"onno", bn:"‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø", en:"Others", imgs:Array.from({length:20},(_,i)=>({src:`images/laxmi_onno${i+1}.jpg`,bn:`‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ${i+1}`,en:`Laxmi Other ${i+1}`})) }
    ]
  },
  {
    id:"janma", bn:"‡¶ú‡¶®‡ßç‡¶Æ‡¶æ‡¶∑‡ßç‡¶ü‡¶Æ‡ßÄ", en:"Janmastami", sections:[
      { key:"boson", bn:"‡¶¨‡¶∏‡¶®", en:"Dress", video:"https://youtu.be/JXnW23ZFm74?si=1zyhFd3T3fwL9suG",
        imgs:Array.from({length:20},(_,i)=>({src:`images/janma_boson${i+1}.jpg`,bn:`‡¶ú‡¶®‡ßç‡¶Æ‡¶æ‡¶∑‡ßç‡¶ü‡¶Æ‡ßÄ ‡¶¨‡¶∏‡¶® ${i+1}`,en:`Janmastami Dress ${i+1}`}))
      },
      { key:"mukut", bn:"‡¶Æ‡ßÅ‡¶ï‡ßÅ‡¶ü", en:"Crown", video:"https://youtu.be/JXnW23ZFm74?si=1zyhFd3T3fwL9suG",
        imgs:Array.from({length:20},(_,i)=>({src:`images/janma_mukut${i+1}.jpg`,bn:`‡¶ú‡¶®‡ßç‡¶Æ‡¶æ‡¶∑‡ßç‡¶ü‡¶Æ‡ßÄ ‡¶Æ‡ßÅ‡¶ï‡ßÅ‡¶ü ${i+1}`,en:`Janmastami Crown ${i+1}`}))
      },
      { key:"onno", bn:"‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø", en:"Others", video:"https://youtu.be/JXnW23ZFm74?si=1zyhFd3T3fwL9suG",
        imgs:Array.from({length:20},(_,i)=>({src:`images/janma_onno${i+1}.jpg`,bn:`‡¶ú‡¶®‡ßç‡¶Æ‡¶æ‡¶∑‡ßç‡¶ü‡¶Æ‡ßÄ ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ${i+1}`,en:`Janmastami Other ${i+1}`}))
      }
    ]
  }
];
let lang = 'bn';
let festIdx = 0, secIdx = 0, page = 0, showChunk=5;
let liked = [];
function renderFests(){
  let fr = document.getElementById('festRow');
  fr.innerHTML = '';
  FESTIVALS.forEach((f,i)=>{
    let btn = document.createElement('button');
    btn.className = 'fest-btn'+(i==festIdx?' active':'');
    btn.textContent = f[lang];
    btn.onclick = ()=>{festIdx=i;secIdx=0;page=0;renderSections();};
    fr.appendChild(btn);
  });
}
function renderSections(){
  let sr = document.getElementById('secRow');
  sr.innerHTML = '';
  let fest = FESTIVALS[festIdx];
  fest.sections.forEach((s, j) => {
    let btn = document.createElement('button');
    btn.className = 'sec-btn' + (j == secIdx ? ' active' : '');
    btn.textContent = s[lang];
    btn.onclick = function(){
      secIdx = j; page = 0; renderSections();
    }
    sr.appendChild(btn);
  });
  renderGallery();
}
function renderGallery(){
  let fest=FESTIVALS[festIdx], sec=fest.sections[secIdx];
  let g=document.getElementById('gallery');g.innerHTML='';
  let start = page*showChunk;
  let slice = sec.imgs.slice(start, start+showChunk);
  slice.forEach((imgO,idx)=>{
    let absIdx = start+idx;
    let k=`${festIdx}_${secIdx}_${absIdx}`;
    g.innerHTML += `
      <div class="card" style="animation-delay:${idx*65}ms;">
        <img src="${imgO.src}" alt="${imgO[lang]}" onclick="showModal(${festIdx},${secIdx},${absIdx})">
        <div class="card-title">${imgO[lang]}</div>
        <button class="like-btn${liked.includes(k)?' liked':''}" onclick="toggleLike(event,'${k}')">${liked.includes(k)?'‚ù§':'‚ô°'} Like</button>
      </div>
    `;
  });
  // arrow btn logic
  document.getElementById('galleryPrev').disabled = (page==0);
  document.getElementById('galleryNext').disabled = ((page+1)*showChunk>=sec.imgs.length);
}
function pagePrev(){if(page>0){page--;renderGallery();}}
function pageNext(){
  let fest=FESTIVALS[festIdx], sec=fest.sections[secIdx];
  if((page+1)*showChunk<sec.imgs.length){page++;renderGallery();}
}
function toggleLike(e,k){
  e.stopPropagation();
  let i = liked.indexOf(k);
  if(i==-1) liked.push(k); else liked.splice(i,1);
  renderGallery();
}
function toggleLang(){
  lang = (lang=='bn')?'en':'bn';
  document.getElementById('langBtn').textContent = (lang=='bn')?'EN':'BN';
  document.getElementById('pageTitle').textContent = (lang=='bn')?'‡¶∂‡¶™ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶≤‡¶ó':'Shop Catalogue';
  renderFests();
  renderSections();
}
function shareWhatsApp(){
  let fest=FESTIVALS[festIdx], sec=fest.sections[secIdx];
  let start = page*showChunk;
  let likedOnPage = [];
  for(let i=start;i<start+showChunk;++i){
    let k=`${festIdx}_${secIdx}_${i}`;
    if(liked.includes(k)) likedOnPage.push(k);
  }
  if(!likedOnPage.length){
    toastMsg(lang=='bn'?'‡¶è‡¶á ‡¶™‡ßá‡¶ú ‡¶•‡ßá‡¶ï‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ‡¶á ‡¶™‡¶õ‡¶®‡ßç‡¶¶ ‡¶ï‡¶∞‡ßá‡¶®‡¶®‡¶ø!':'No liked items on this page!');
    return;
  }
  let txt = lang=='bn'?'‡¶Ü‡¶Æ‡¶ø ‡¶™‡¶õ‡¶®‡ßç‡¶¶ ‡¶ï‡¶∞‡ßá‡¶õ‡¶ø:\n':'I liked these:\n';
  for(let k of likedOnPage){
    let [fi,si,imgi]=k.split('_');
    let fest=FESTIVALS[fi],sec=fest.sections[si],imgO=sec.imgs[imgi];
    txt += `${fest[lang]} - ${sec[lang]} - ${imgO[lang]}\n`;
  }
  toastMsg((lang=='bn'?'‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶á ' : 'You selected ') + likedOnPage.length + (lang=='bn'?'‡¶ü‡¶ø ‡¶™‡¶õ‡¶®‡ßç‡¶¶ ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®!':' items!'));
  setTimeout(()=>{
    let num = '9547486999';
    let url = 'https://wa.me/91'+num+'?text='+encodeURIComponent(txt);
    window.open(url,'_blank');
  },1100);
}
function toastMsg(msg){
  let t=document.getElementById('toastMsg');
  t.innerText=msg;t.style.display='block';
  setTimeout(()=>{t.style.display='none';},1400);
}
let modalFi=0, modalSi=0, modalIdx=0;
function showModal(fi,si,idx){
  modalFi=fi; modalSi=si; modalIdx=idx;
  let fest = FESTIVALS[fi], sec = fest.sections[si], imgO = sec.imgs[idx];
  document.getElementById('modalImg').src = imgO.src;
  document.getElementById('modalModalTitle').textContent = imgO[lang];
  let k = `${fi}_${si}_${idx}`;
  let btn=document.getElementById('modalLikeBtn');
  if(liked.includes(k)){btn.className='modal-like-btn liked';btn.innerHTML='‚ù§ Liked';}else{btn.className='modal-like-btn';btn.innerHTML='‚ô° Like';}
  document.getElementById('modalPrevBtn').disabled = idx==0;
  document.getElementById('modalNextBtn').disabled = idx==FESTIVALS[fi].sections[si].imgs.length-1;
  let videoWrap = document.getElementById('modalVideoWrap');
  if(fest.id === 'janma' && sec.video){
    videoWrap.innerHTML = `<button class="video-btn" onclick="window.open('${sec.video}','_blank')"><span class="video-ico">‚ñ∂Ô∏è</span>${lang=='bn'?'‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®':'Watch Video'}</button>`;
  } else {
    videoWrap.innerHTML = '';
  }
  document.getElementById('modalBg').classList.add('active');
  document.getElementById('modalInner').style.animation='modalPop .6s cubic-bezier(.34,1.7,.4,.93)';
  setTimeout(()=>{document.getElementById('modalInner').style.animation='';},620);
}
function closeModal(){document.getElementById('modalBg').classList.remove('active');}
function modalToggleLike(){
  let k = `${modalFi}_${modalSi}_${modalIdx}`;
  let i = liked.indexOf(k);
  if(i==-1) liked.push(k); else liked.splice(i,1);
  showModal(modalFi,modalSi,modalIdx); 
  renderGallery();
}
function modalPrev(){if(modalIdx>0) showModal(modalFi,modalSi,modalIdx-1);}
function modalNext(){let imgs=FESTIVALS[modalFi].sections[modalSi].imgs;if(modalIdx<imgs.length-1)showModal(modalFi,modalSi,modalIdx+1);}
renderFests();
renderSections();function renderFests(){
  let fr = document.getElementById('festRow');
  fr.innerHTML = '';
  FESTIVALS.forEach((f,i)=>{
    let btn = document.createElement('button');
    btn.className = 'fest-btn'+(i==festIdx?' active':'');
    btn.textContent = f[lang];
    btn.onclick = ()=>{
      festIdx = i; secIdx = 0; page = 0;
      renderFests();         // ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ renderFests ‡¶°‡¶æ‡¶ï‡ßÅ‡¶®!
      renderSections();
    }
    fr.appendChild(btn);
  });
}

</script>
</body>
</html>
