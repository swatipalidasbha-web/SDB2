<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Shop Catalogue</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{
  margin:0;padding-bottom:110px;font-family:'Segoe UI',sans-serif;background:#f8fafd;
  max-width:100vw;overflow-x:hidden;
}
.header {
  background:linear-gradient(96deg,#d3f0ff 63%,#f3fcff 100%);
  padding:14px 0 8px 0; margin-bottom:0;
}
.header-title{
  font-size:1.03em;font-weight:900;color:#1880cb;text-align:center;margin-bottom:9px;
}
.catrow{
  display:flex;gap:11px;align-items:center;overflow-x:auto;justify-content:flex-start;max-width:98vw;
  margin:0 auto 9px auto;padding:8px 3vw 3px 3vw;scrollbar-width:thin;-webkit-overflow-scrolling:touch;
}
.cat-tile{
  min-width:105px;max-width:150px;background:#fff;color:#1976a8;font-size:.97em;font-weight:900;
  border:none;border-radius:13px;padding:10px 8px;display:flex;align-items:center;justify-content:center;
  cursor:pointer;box-shadow:0 2px 8px #a9caf409;transition:background .19s,color .15s,box-shadow .17s,transform .14s;
  margin:0;white-space:nowrap;
}
.cat-tile.active{background:linear-gradient(92deg,#197bd3 66%,#17cab5 115%);color:#fff;box-shadow:0 4px 12px #32a1d820;transform:scale(1.06);}
.subbar{display:flex;gap:7px;justify-content:center;align-items:center;margin:6px 0 0 1vw;overflow-x:auto;}
.sub-btn{background:#eaf3ff;color:#145d98;font-size:.95em;padding:7px 19px;border-radius:9px;border:none;font-weight:800;cursor:pointer;white-space:nowrap;transition:background .16s,color .12s,box-shadow .13s,transform .13s;}
.sub-btn.active{background:linear-gradient(94deg,#1384d2 82%,#13db99 100%);color:#fff;box-shadow:0 2px 7px #99fbe776;transform:scale(1.04);}
.imggrid-label{font-size:.92em;font-weight:700;color:#187fc3;margin:10px 0 6px 13px;}
.grid-wrap{max-width:410px;width:99vw;margin:0 auto;}
.grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:7px 9px;
}
@media (max-width:480px) {
  .grid-wrap{max-width:99vw;}
  .grid{gap:4px 5px;}
  .cat-tile{min-width:84px;font-size:.92em;}
  .modal-img{max-width:96vw;}
}
.card{background:#fff;border-radius:11px;box-shadow:0 2.2px 12px #aae9fb14;padding:9px 2px 12px 2px;display:flex;flex-direction:column;align-items:center;position:relative;}
  .card.best-collection{
  /* Vibrant animated gradient; modern, silky, premium! */
  background: linear-gradient(115deg,#ffedd8 0%, #e0fbe8 36%, #6ee5c5 65%, #ffeaaa 70%, #ffbcca 100%);
  background-size: 400% 400%;
  animation: premiumColorMove 5s ease-in-out infinite alternate;
  box-shadow: 0 3px 20px #ffeedb25;
}
@keyframes premiumColorMove{
  0%{background-position:0% 50%;}
  100%{background-position:100% 50%;}
}

}
@keyframes deepSilverAnim{0%{background-position:0% 42%;} 100%{background-position:100% 72%;}}
.c-img{width:65px;height:65px;object-fit:cover;border-radius:7px;background:#f6faff;box-shadow:0 1.0px 4px #d6fefd11;}
.c-title{font-size:.90em;font-weight:900;margin:5px 0 5px 0;text-align:center;color:#185493;line-height:1.13;word-break:break-word;min-height:1.1em;max-width:96%;overflow-wrap:anywhere;}
.card-action-row{display:flex;gap:7px;margin-top:5px;}
.like-btn{background:#f8fdff;color:#ea3d7a;font-size:.91em;font-weight:800;border-radius:8px;padding:5px 9px;border:none;cursor:pointer;transition:.11s;}
.like-btn.liked{background:linear-gradient(90deg,#FFD700 0%,#FFA500 100%);color:#000}
.prev-btn{background:linear-gradient(90deg,#15b3b3 80%,#188ddd 111%);color:#fff;font-size:.91em;font-weight:900;border:none;padding:5px 11px;border-radius:7px;cursor:pointer;transition:.12s;}
.page-row{display:flex;gap:5px;align-items:center;justify-content:center;margin:9px 0 7px 0;}
.page-btn{background:linear-gradient(94deg,#18d2ea 69%,#1476cd 108%);border-radius:8px;border:none;color:#fff;font-size:.97em;font-weight:900;padding:4px 8px;margin:0 1px;cursor:pointer;}
.page-btn[disabled]{opacity:.19;}
.p-label{font-weight:800;min-width:23px;text-align:center;color:#138db6;}
#modalBg{position:fixed;inset:0;z-index:2200;background:rgba(36,52,103,0.13);display:none;align-items:center;justify-content:center;}
.modal-inner{background:#fff;border-radius:12px;box-shadow:0 22px 42px #12cde251;padding:8px 2vw 9px 2vw;max-width:97vw;max-height:88vh;display:flex;flex-direction:column;align-items:center;gap:7px;}
.modal-img{max-width:70vw;max-height:34vh;border-radius:9px;box-shadow:0 5px 11px #a7dce90b;}
.modal-title{font-size:.91em;font-weight:900;color:#1967be;text-align:center;}
.modal-like-btn{border:none;background:#e3f2f9;color:#d80e4e;font-size:.89em;font-weight:900;border-radius:7px;padding:4px 10px;margin-top:1px;cursor:pointer;transition:.11s;}
.modal-like-btn.liked{background:#e5ffea;color:#ef217a;}
.modal-close-btn{background:#f2f7fc;border:none;color:#d5163c;font-size:.89em;padding:5px 10px;font-weight:900;border-radius:8px;margin-top:3px;cursor:pointer;}
.modal-back-btn{background:#f8feff;border:none;color:#1864bc;font-size:.93em;padding:5px 12px;font-weight:900;border-radius:7px;cursor:pointer;margin-bottom:2px;}
.rev-row-num{display:flex;gap:8px;align-items:center;justify-content:center;margin:7px 0 0 0;}
.num-btn{font-size:1.06em;font-weight:800;border-radius:5px;background:#f6fafd;border:none;padding:2px 6px;cursor:pointer;transition:.11s;color:#158eb7;}
.num-btn.selected{background:linear-gradient(95deg,#dae4e9 24%,#91a5b7 88%);color:#2b3345;}
.rev-label{font-size:.90em;font-weight:800;color:#156a97;margin-right:5px;}
.rev-thank{font-size:.88em;font-weight:800;margin-top:7px;color:#019b4b;background:rgba(220,253,234,1);padding:4px 8px 4px 8px;border-radius:7px;box-shadow:0 2px 7px #bcfbe7a6;}
#likedBar{position:fixed;left:0;bottom:0;width:100vw;padding:8px 0 10px 0;background:linear-gradient(91deg,#09fbe3 65%,#1caffb 100%);
  display:flex;align-items:center;justify-content:space-between;z-index:2210;box-shadow:0 -3px 12px #53e7fa25;}
.lb-btn{font-size:.90em;font-weight:900;background:#fff;color:#12a8b7;
  padding:8px 0 8px 0;margin:0;width:50vw;border:none;cursor:pointer;outline:none;letter-spacing:.01em;border-radius:0;
  transition:.13s;border-top:2px solid #e8f8fa;}
.lb-btn:active{background:#e6f8fa;}
.lb-btn.send{color:#1f9f18;border-left:2px solid #e8e8f6;}
.lb-btn.list{color:#1292c0;}
#waListBg{display:none;position:fixed;inset:0;z-index:2999;backdrop-filter:blur(2px);background:rgba(39,54,98,0.13);align-items:center;justify-content:center;}
#walist-modal{background:#fff;border-radius:12px;box-shadow:0 7px 12px #13dbe8aa;padding:8px 2vw 9px 2vw;max-width:97vw;max-height:59vh;overflow:auto;display:flex;flex-direction:column;align-items:center;}
#waListTitle{font-weight:900;color:#2174bc;font-size:.99em;margin-bottom:2px;}
#waLikedList{list-style:none;text-align:left;max-width:410px;padding:2px 2px 11px 0;}
#waLikedList li{margin:7px 0 7px 0;display:flex;align-items:center;gap:8px;}
.lbthumb{width:29px;height:29px;border-radius:6px;object-fit:cover;background:#f2f5f7;}
.lbtit{font-size:.82em;font-weight:700;color:#156687;}
.lbrv{margin-left:auto;}
.lb-rm{background:none;border:none;color:#e81345;font-size:.99em;font-weight:900;cursor:pointer;}
#waSendBtn{background:linear-gradient(87deg,#11dfbd 78%,#168dff 98%);color:#fff;font-size:.89em;font-weight:900;border:none;border-radius:6px;padding:7px 13px;margin:6px 0 0 0;box-shadow:0 2px 4px #41d5e845;cursor:pointer;}
#waCloseBtn{background:none;border:none;color:#dc105c;font-size:.91em;margin:6px 0 0 0;font-weight:700;cursor:pointer;}
</style>
</head>
<body>
<div class="header">
  <div class="header-title">Shop Catalogue</div>
  <div class="catrow" id="mainSectionList"></div>
  <div class="subbar" id="subBar" style="display:none"></div>
</div>
<div class="grid-wrap">
  <div class="imggrid-label" id="imgGridLabel"></div>
  <div class="grid" id="gallery"></div>
  <div class="page-row" id="pageRow" style="display:none;">
    <button class="page-btn" onclick="pagePrev()" id="prevBtn">&larr;</button>
    <span class="p-label" id="pageLabel"></span>
    <button class="page-btn" onclick="pageNext()" id="nextBtn">&rarr;</button>
  </div>
</div>
<!-- Modal: Preview & Review -->
<div id="modalBg">
  <div class="modal-inner">
    <button class="modal-back-btn" onclick="closeModal()">← পিছনে যান</button>
    <img src="" id="modalImg" class="modal-img" alt="">
    <div class="modal-title" id="modalModalTitle"></div>
    <button class="modal-like-btn" id="modalLikeBtn" onclick="modalToggleLike()">♡ Like</button>
    <div class="rev-row-num" id="modalNumRow">
      <span class="rev-label" id="reviewLabel">রেটিং দিন:</span>
      <button class="num-btn" data-v="1">1</button>
      <button class="num-btn" data-v="2">2</button>
      <button class="num-btn" data-v="3">3</button>
      <button class="num-btn" data-v="4">4</button>
      <button class="num-btn" data-v="5">5</button>
    </div>
    <div id="reviewThanks" style="display:none;" class="rev-thank"></div>
    <button class="modal-close-btn" onclick="closeModal()">✕ বন্ধ করুন</button>
  </div>
</div>
<!-- Liked bar sticky -->
<div id="likedBar">
  <button class="lb-btn list" id="likedListBtn" onclick="showWaPreview()">পছন্দের লিস্ট দেখুন</button>
  <button class="lb-btn send" id="waSendBtnBar" onclick="waSendList()">পছন্দের লিস্ট পাঠান</button>
</div>
<!-- Liked Preview/WhatsApp modal -->
<div id="waListBg">
  <div id="walist-modal">
    <div id="waListTitle"></div>
    <ul id="waLikedList"></ul>
    <button id="waSendBtn"></button>
    <button id="waCloseBtn"></button>
  </div>
</div>
<script>
const DATA=[
  {key:"mala",name:"মালা",subs:[{name:"best"},{name:"all"}]},
  {key:"chandmala",name:"চাঁদমালা",subs:[{name:"best"},{name:"all"}]},
  {key:"prodip",name:"প্রদীপ",subs:[{name:"best"},{name:"all"}]},
  {key:"saj",name:"সাজ",subs:[{name:"best"},{name:"all"}]},
  {key:"kapor",name:"কাপড়",subs:[{name:"best"},{name:"all"}]},
  {key:"gopal",name:"গোপালসাজ",subs:[{name:"boson"},{name:"mukut"}]},
  {key:"durga",name:"দুর্গাপুজা",subs:[{name:"saj"},{name:"kapor"},{name:"all"}]},
  {key:"kali",name:"কালিপুজা",subs:[{name:"saj"},{name:"kapor"},{name:"all"}]},
  {key:"saraswati",name:"সরস্বতী",subs:[{name:"saj"},{name:"kapor"},{name:"prodip"},{name:"all"}]},
  {key:"laxmi",name:"লক্ষী",subs:[{name:"saj"},{name:"kapor"},{name:"prodip"},{name:"all"}]},
  {key:"all",name:"অন্যান্য",subs:[{name:"all"}]}
];
const IMAGE_ROOT = "images/";
let perPage=6, currMainIdx=0, currSubIdx=0, page=0, liked=[], reviews={}, modalImgs=[], currModalKey="";
function imgName(secObj,subObj,num){ return `${secObj.name}${subObj.name}${num}`;}
function renderMainSections(){
  let mainlist=document.getElementById('mainSectionList');mainlist.innerHTML='';
  DATA.forEach((sec,idx)=>{
    let btn=document.createElement('button');
    btn.className='cat-tile'+(currMainIdx===idx?' active':'');
    btn.textContent=sec.name;
    btn.onclick=()=>{currMainIdx=idx;currSubIdx=0;page=0;renderSubbar();renderActiveTile(idx);};
    mainlist.appendChild(btn);
  });
  renderActiveTile(currMainIdx); renderSubbar();
}
function renderActiveTile(idx){
  let tiles=document.querySelectorAll('.cat-tile');
  tiles.forEach((t,i)=>{t.classList.toggle('active',i===idx);});
  if(tiles[idx]){tiles[idx].scrollIntoView({behavior:"smooth",inline:"center"});}
}
function renderSubbar(){
  let sec=DATA[currMainIdx],sb=document.getElementById('subBar');sb.innerHTML='';
  if(sec.subs.length>1 || sec.subs[0].name!=="all"){
    sb.style.display='flex';
    sec.subs.forEach((s,i)=>{
      let btn=document.createElement('button');
      btn.className='sub-btn'+(i===currSubIdx?' active':'');
      btn.textContent=s.name;
      btn.onclick=()=>{currSubIdx=i;page=0;renderGallery();renderSubbar();};
      sb.appendChild(btn);
    });
  }
  else sb.style.display='none';
  renderGallery();
}
function renderGallery(){
  let g=document.getElementById('gallery');
  let sec=DATA[currMainIdx],sub=sec.subs[currSubIdx];
  let isBest = sub.name === "Best";
  let images=[];
  for(let i=1;i<=10;i++){
    images.push({
      src:`${IMAGE_ROOT}${sec.name}${sub.name}${i}.jpg`,
      title:imgName(sec,sub,i),
      cardClass: isBest ? "card best-collection" : "card"
    });
  }
  modalImgs=images;
  let totalPages=Math.ceil(images.length/perPage);
  let start=page*perPage, arr=images.slice(start,start+perPage);
  g.innerHTML='';
  document.getElementById('imgGridLabel').textContent=" “পছন্দ তালিকাভুক্ত করতে ছবিটি লাইক করুন”";
  arr.forEach((imgO,idx)=>{
    let absIdx=start+idx;
    let lk=likeKey(sec.name,sub.name,absIdx);
    g.innerHTML+=`
      <div class="${imgO.cardClass}">
        <img src="${imgO.src}" class="c-img">
        <div class="c-title">${imgO.title}</div>
        <div class="card-action-row">
          <button class="like-btn${liked.includes(lk)?' liked':''}" onclick="toggleLike(event,'${sec.name}','${sub.name}',${absIdx})">${liked.includes(lk)?'Liked':'Like'}</button>
          <button class="prev-btn" onclick="showModal('${sec.name}','${sub.name}',${absIdx})">Preview</button>
        </div>
      </div>
    `;
  });
  let pr=document.getElementById('pageRow');
  pr.style.display = totalPages>1 ? 'flex':'none';
  document.getElementById('pageLabel').textContent=`${page+1}/${totalPages}`;
  document.getElementById('prevBtn').disabled=page===0;
  document.getElementById('nextBtn').disabled=(page+1)>=totalPages;
}
function likeKey(sec,sub,idx){return `${sec}_${sub}_${idx}`;}
function pagePrev(){if(page>0){page--;renderGallery();}}
function pageNext(){
  let totalImages=10;
  let totalPages=Math.ceil(totalImages/perPage);
  if(page+1<totalPages){page++;renderGallery();}
}
function showModal(sec,sub,idx){
  let images = modalImgs; let imgObj=images[idx%images.length];
  let lk = likeKey(sec,sub,idx), lvd = liked.includes(lk); currModalKey = lk;
  document.getElementById('modalImg').src = imgObj.src;
  document.getElementById('modalModalTitle').textContent = imgObj.title;
  let lbtn = document.getElementById('modalLikeBtn');
  lbtn.className='modal-like-btn'+(lvd?' liked':'');
  lbtn.innerHTML=lvd?'❤️ পছন্দ':'♡ Like';
  lbtn.onclick=function(){toggleLike({stopPropagation:()=>{}},sec,sub,idx);showModal(sec,sub,idx);}
  // Number 1-5 rating
  let nums = document.querySelectorAll('.num-btn');
  let saved = Number(reviews[lk])||0;
  nums.forEach(nb=>{
    nb.classList.toggle('selected', Number(nb.dataset.v)===saved);
    nb.onclick=function(){
      reviews[lk]=Number(nb.dataset.v);
      nums.forEach(btn=>btn.classList.toggle('selected',btn===nb));
      let thx=document.getElementById('reviewThanks');
      thx.textContent="রিভিউ করার জন্য ধন্যবাদ!"; thx.style.display='block';
      setTimeout(()=>{thx.style.display='none';},1200);
    };
  });
  document.getElementById('modalBg').style.display='flex';
}
function closeModal(){document.getElementById('modalBg').style.display='none';currModalKey="";}
function toggleLike(e,sec,sub,idx){
  e.stopPropagation();
  let k = likeKey(sec,sub,idx);
  let i = liked.indexOf(k);
  if(i===-1) liked.push(k); else liked.splice(i,1);
  renderGallery();
}
function waSendList(){
  if(!liked.length){alert("কিছুই পছন্দ করেননি!");return;}
  let arr=liked.map(k=>{
    let [sec,sub,idx]=k.split('_');
    return `${sec}${sub}${parseInt(idx)+1}`;
  });
  let ratings=liked.map(k=>`(${reviews[k]??'N/A'})`).join(', ');
  let msg='আমি পছন্দ করেছি: '+arr.join(', ')+'\nরেটিং: '+ratings;
  let num='9547486999';
  let url='https://wa.me/91'+num+'?text='+encodeURIComponent(msg);
  window.open(url,'_blank');
}
function showWaPreview(){
  let arr=liked.map((k,li)=>{
    let [sec,sub,idx]=k.split('_');
    let nm=`${sec}${sub}${parseInt(idx)+1}`,path=`${IMAGE_ROOT}${nm}.jpg`,star=reviews[k]||'';
    return {k,path,title:nm,star};
  });
  let modal=document.getElementById('waListBg'),list=document.getElementById('waLikedList');
  document.getElementById('waListTitle').textContent="পছন্দের তালিকা";
  if(!arr.length) list.innerHTML=`<li style="color:#dc2e57;font-weight:600;">কিছুই পছন্দ করেননি!</li>`;
  else list.innerHTML=arr.map(x=>`<li><img class="lbthumb" src="${x.path}"><span class="lbtit">${x.title}</span><span class="lbrv">${x.star?('রেটিং: '+x.star):""}</span><button class="lb-rm" onclick="lbDel('${x.k}')">✕</button></li>`).join('');
  document.getElementById('waSendBtn').textContent="WhatsApp এ পাঠান";
  document.getElementById('waCloseBtn').textContent="বন্ধ করুন";
  document.getElementById('waSendBtn').onclick=waSendList;
  document.getElementById('waCloseBtn').onclick=()=>{modal.style.display='none';};
  modal.style.display='flex';
}
function lbDel(k){liked=liked.filter(x=>x!==k);showWaPreview();}
renderMainSections();
</script>
</body>
</html>